server:
  shutdown: graceful
  port: 8080

jwt:
  secret:
    key: ${SECRET_KEY}

spring:
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':  # ğŸ”¹ ëª¨ë“  ê²½ë¡œì—ì„œ CORS í—ˆìš©
            allowedOrigins: "http://localhost:3000" # ğŸš€ íŠ¹ì • Originì„ ëª…ì‹œí•´ì•¼ allowCredentials ì‚¬ìš© ê°€ëŠ¥
            allowedMethods: "GET, POST, PUT, DELETE, OPTIONS"
            allowedHeaders: "*"
            allowCredentials: true  # ğŸš€ trueì´ë©´ allowedOriginsì— * ëŒ€ì‹  íŠ¹ì • ë„ë©”ì¸ ì„¤ì •í•´ì•¼ í•¨
      routes:
        - id: product-service
          predicates:
            - Path=/product/**, /swagger-ui/**, /docs-ui/**, /docs-api/**, /v3/**
          uri: http://product-service:8080
          filters:
            - RewritePath=/product/(?<segment>.*), /$\{segment}

        - id: product-service-with-authentication
          predicates:
            - Path=/member/**
          uri: http://product-service:8080
          filters:
            - RewritePath=/member/(?<segment>.*), /$\{segment}
            - name: JwtAuthenticationFilter
              args:
                secretKey: ${jwt.secret.key}

        - id: token-service
          predicates:
            - Path=/token/**
          uri: http://token-service:8080
          filters:
            - RewritePath=/token/(?<segment>.*), /$\{segment}
